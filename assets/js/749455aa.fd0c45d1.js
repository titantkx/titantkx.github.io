"use strict";(self.webpackChunktitantkx_github_io=self.webpackChunktitantkx_github_io||[]).push([[221],{5792:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"getting-set-up/joining-mainnet","title":"\u26d3\ufe0f Joining Mainnet","description":"Make sure you completed the Installation step before following this session. You will also need knowledge about linux service file (systemd).","source":"@site/docs/getting-set-up/joining-mainnet.md","sourceDirName":"getting-set-up","slug":"/getting-set-up/joining-mainnet","permalink":"/docs/getting-set-up/joining-mainnet","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udc6e\u200d\u2642\ufe0f Become a Testnet Validator","permalink":"/docs/getting-set-up/become-a-testnet-validator"},"next":{"title":"\ud83d\ude94 Become a Mainnet Validator","permalink":"/docs/getting-set-up/become-a-mainnet-validator"}}');var s=t(6070),o=t(5658);const a={sidebar_position:4},r="\u26d3\ufe0f Joining Mainnet",c={},d=[{value:"Information",id:"information",level:2},{value:"Installation &amp; Configuration",id:"installation--configuration",level:2},{value:"Init config file and data",id:"init-config-file-and-data",level:3},{value:"Retrieve the genesis file of the Titan Chain and store it in the config directory",id:"retrieve-the-genesis-file-of-the-titan-chain-and-store-it-in-the-config-directory",level:3},{value:"Config your node",id:"config-your-node",level:3},{value:"Set peers",id:"set-peers",level:4},{value:"Config external address",id:"config-external-address",level:4},{value:"Index",id:"index",level:4},{value:"Config state sync",id:"config-state-sync",level:3},{value:"Create Service File",id:"create-service-file",level:3},{value:"Start the Service",id:"start-the-service",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\ufe0f-joining-mainnet",children:"\u26d3\ufe0f Joining Mainnet"})}),"\n",(0,s.jsxs)(n.p,{children:["Make sure you completed the ",(0,s.jsx)(n.a,{href:"/docs/getting-set-up/installation/from-source",children:"Installation"})," step before following this session. You will also need knowledge about linux service file (systemd)."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Current Version: v2.0.1"}),"\n",(0,s.jsx)(n.li,{children:"Chain ID: titan_18888-1"}),"\n",(0,s.jsx)(n.li,{children:"Denom: atkx, tkx (1e18 atkx)"}),"\n",(0,s.jsxs)(n.li,{children:["Endpoint: ",(0,s.jsx)(n.a,{href:"/docs/mainnet",title:"mention",children:"mainnet.md"})]}),"\n",(0,s.jsxs)(n.li,{children:["Explorer: ",(0,s.jsx)(n.a,{href:"https://tkxscan.io/",children:"https://tkxscan.io"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"information",children:"Information"}),"\n",(0,s.jsxs)(n.p,{children:["The Titan mainnet is currently running ",(0,s.jsx)(n.strong,{children:"titand"})," ",(0,s.jsx)(n.code,{children:"v2.0.1"}),". Visit the ",(0,s.jsx)(n.a,{href:"https://tkxscan.io/Titan",children:"explorer"})," to view real-time on-chain activity"]}),"\n",(0,s.jsx)(n.p,{children:"We recommend running public mainnet nodes on a machine with at least two cores, 8GB of RAM, and 100GB of disk space SSD."}),"\n",(0,s.jsx)(n.h2,{id:"installation--configuration",children:"Installation & Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"init-config-file-and-data",children:"Init config file and data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"titand init <custom_moniker>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now, a folder will be created by default in your HOME directory as ",(0,s.jsx)(n.code,{children:"$HOME/.titan"}),". This folder will store all the configuration and data files of the node during operation."]}),"\n",(0,s.jsx)(n.h3,{id:"retrieve-the-genesis-file-of-the-titan-chain-and-store-it-in-the-config-directory",children:"Retrieve the genesis file of the Titan Chain and store it in the config directory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd $HOME\ncurl -LO https://github.com/titantkx/titan-mainnet/raw/main/public/genesis.json.gz\ngzip -d genesis.json.gz\nmv genesis.json $HOME/.titand/config/genesis.json\n"})}),"\n",(0,s.jsx)(n.h3,{id:"config-your-node",children:"Config your node"}),"\n",(0,s.jsx)(n.h4,{id:"set-peers",children:"Set peers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd $HOME/.titand/config\nsed -i 's/seeds =.*/seeds = \"bee5ef5680cf90fe40d6cde872cdc52e53c8338d@titan-p2p-seed-1.titanlab.io:26656,a7e03c50f9b85ac2c9488d20913a37c2d1a9361c@titan-p2p-seed-1-seoul.titanlab.io:26656\"/' config.toml\n"})}),"\n",(0,s.jsx)(n.h4,{id:"config-external-address",children:"Config external address"}),"\n",(0,s.jsxs)(n.p,{children:["You will need to config ",(0,s.jsx)(n.code,{children:"external_address"})," in file ",(0,s.jsx)(n.code,{children:"config.toml"})," is external address of your node. Correct this config will allow other node in P2P network connect to your node."]}),"\n",(0,s.jsx)(n.h4,{id:"index",children:"Index"}),"\n",(0,s.jsx)(n.p,{children:"By default, we disable all indexes and only keep 100 recent blocks to optimize the diskspace used by node."}),"\n",(0,s.jsxs)(n.p,{children:["If you want to enable index, you need to change the config in file ",(0,s.jsx)(n.code,{children:"app.toml"})," and ",(0,s.jsx)(n.code,{children:"config.toml"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Ethereum transaction  (in ",(0,s.jsx)(n.code,{children:"app.toml"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:"[json-rpc]\n\n# EnableIndexer enables the custom transaction indexer for the EVM (ethereum transactions).\nenable-indexer = true\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["TX index, for query tx (in ",(0,s.jsx)(n.code,{children:"config.toml"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[tx_index]\n\n# What indexer to use for transactions\n#\n# The application will set which txs to index. In some cases a node operator will be able\n# to decide which txs to index based on configuration set in the application.\n#\n# Options:\n#   1) "null"\n#   2) "kv" (default) - the simplest possible indexer, backed by key-value storage (defaults to levelDB; see DBBackend).\n#      - When "kv" is chosen "tx.height" and "tx.hash" will always be indexed.\n#   3) "psql" - the indexer services backed by PostgreSQL.\n# When "kv" or "psql" is chosen "tx.height" and "tx.hash" will always be indexed.\nindexer = "kv"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"config-state-sync",children:"Config state sync"}),"\n",(0,s.jsxs)(n.p,{children:["If you use the latest binary version, this is required to sync data from blockchain. If you want to sync data from the genesis block, you must start syncing from genesis binary and follow ",(0,s.jsx)(n.a,{href:"/docs/upgrade/upgrade-list#mainnet",children:"every upgrade in history"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Without this, your node will have to synchronize data from the genesis, which could take a considerable amount of time. Instead, we will search for snapshots from trusted peers at a specific height and then verify a minimal set of snapshot chunks against the network."}),"\n",(0,s.jsxs)(n.p,{children:["Get the block height and block hash. First, you need to access the ",(0,s.jsx)(n.a,{href:"https://tkxscan.io/",children:"explorer website"})," to obtain the nearest block height and its corresponding hash. We configure a node to take a snapshot every 1000 blocks and keep the 10 most recent snapshots. Therefore, the snapshot corresponding to the nearest block height will have the highest thousand value. For example, at the time of writing this guide testnet block height is ",(0,s.jsx)(n.code,{children:"37026"})," so the nearest block height will be ",(0,s.jsx)(n.code,{children:"37000"}),". Enter the block height in the search bar at the top of the website to retrieve its hash. The hash of Block ",(0,s.jsx)(n.code,{children:"37000"})," is:  ",(0,s.jsx)(n.code,{children:"7240576BE8C737A4DA3849C2739143944F2D87C7E2A449A0949D03D1B72E878C"})]}),"\n",(0,s.jsxs)(n.p,{children:["After having block height and block hash run the following command in order (replace ",(0,s.jsx)(n.code,{children:"<BLOCK_HEIGHT>"})," and  ",(0,s.jsx)(n.code,{children:"<BLOCK_HASH>"})," by the value you found in the above step)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"rpc_servers"})," need at least 2 servers."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd $HOME/.titand/config\nsed -i 's/enable =.*/enable = true/' config.toml\nsed -i 's/trust_height =.*/trust_height = <BLOCK_HEIGHT>/' config.toml\nsed -i 's/trust_hash =.*/trust_hash = \"<BLOCK_HASH>\"/' config.toml\nsed -i 's/rpc_servers =.*/rpc_servers = \"https:\\/\\/titan-rpc-1.titanlab.io:443,https:\\/\\/titan-rpc-2.titanlab.io:443\"/' config.toml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"create-service-file",children:"Create Service File"}),"\n",(0,s.jsxs)(n.p,{children:["To make the upgrade process as convenient as possible, instead of using ",(0,s.jsx)(n.code,{children:"titand"})," binary directly we recommend you follow ",(0,s.jsx)(n.a,{href:"/docs/upgrade/automatic-upgrades",children:"this guide"})," to use ",(0,s.jsx)(n.a,{href:"https://docs.cosmos.network/main/build/tooling/cosmovisor",children:(0,s.jsx)(n.code,{children:"cosmovisor"})})]}),"\n",(0,s.jsxs)(n.p,{children:["Get your absolute path of ",(0,s.jsx)(n.code,{children:"titand"}),"  binary and your HOME directory that contains ",(0,s.jsx)(n.code,{children:".titan"})," folder"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"which titand\necho $HOME\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a service file at ",(0,s.jsx)(n.code,{children:"/etc/systemd/system/titand.service"}),". Replace ",(0,s.jsx)(n.code,{children:"<titand_absolute_path>"})," and ",(0,s.jsx)(n.code,{children:"<home_directory>"})," to your."]}),"\n",(0,s.jsxs)(n.p,{children:["To find out your ",(0,s.jsx)(n.code,{children:"<titand_absolute_path>"})," you can use command ",(0,s.jsx)(n.code,{children:"which titand"}),". And your ",(0,s.jsx)(n.code,{children:"<home_directory>"})," by command ",(0,s.jsx)(n.code,{children:"echo $HOME"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"[Unit]\nDescription=Titan service\nAfter=network-online.target\n\n[Service]\nUser=root\nExecStart=<titand_absolute_path> start --x-crisis-skip-assert-invariants --home <home_directory>/.titand\nRestart=always\nRestartSec=6\nLimitNOFILE=4096\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,s.jsx)(n.h3,{id:"start-the-service",children:"Start the Service"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"systemctl daemon-reload\nsystemctl restart systemd-journald\nsystemctl enable titand.service\nsystemctl start titand.service\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now that your node has started up and the synchronization process has begun, you can check the sync status of the node using the following command. If the node is syncing, it will show ",(0,s.jsx)(n.code,{children:"true"}),". Please wait until it show ",(0,s.jsx)(n.code,{children:"false"}),", which means your node has caught up with the network and is ready for querying."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"titand status | grep -o '\"catching_up\":[^,}]*'\n"})}),"\n",(0,s.jsx)(n.p,{children:"If have any issue, you can check error log by"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"journalctl -fu titand\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},5658:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(758);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);